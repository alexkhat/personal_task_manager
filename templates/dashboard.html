{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>Dashboard</h1>

    <div class="stats">
        <p><strong>Total Tasks:</strong> {{ total_tasks }}</p>
        <p><strong>Drafts:</strong> {{ drafts }}</p>
    </div>

    <h3>Your Tasks</h3>
    <ul class="list-group">
        {% for task in tasks %}
            <li class="list-group-item {% if task.completed %}bg-success text-white{% else %}bg-warning text-dark{% endif %}">
                <div>
                    <strong>{{ task.description }}</strong> - Due: {{ task.due_date }}
                    <span class="badge {% if task.completed %}bg-success{% else %}bg-warning{% endif %}">
                        {% if task.completed %}Completed{% else %}Pending{% endif %}
                    </span>
                </div>

                <!-- Action Buttons with colors -->
                <div class="mt-2">
                    <a href="{{ url_for('main_routes.edit_task', task_id=task.id) }}" class="btn btn-primary btn-sm">Edit</a>
                    <a href="{{ url_for('main_routes.complete_task', task_id=task.id) }}" class="btn btn-success btn-sm {% if task.completed %}disabled{% endif %}">Complete</a>
                    <a href="{{ url_for('main_routes.delete_task', task_id=task.id) }}" class="btn btn-danger btn-sm">Delete</a>
                </div>
            </li>
        {% else %}
            <li class="list-group-item">No tasks available.</li>
        {% endfor %}
    </ul>

    <a href="{{ url_for('main_routes.new_task') }}" class="btn btn-primary mt-3">Create New Task</a>
</div>
{% endblock %}
